Episode 11
Creating a Server

1. What's server?
    1. It can refer to both hardware and software
    2. Hardware - 
2. HW - SW connection
    1. In HW, we'll store the files, data etc
    2. If we want to access the files/ data from that server, we need an app to connect to the server, and the server can serve the files as repsonse to the clients.
    3. We can refer the App to as server or,
    4. Refer the hardware system as a server

3. AWS
    1. a server is referred as an "ec2 instance"
    2. my instance can have large RAM and Memory
    3. Easily scalable based on our request
    4. Power, internet never goes down
    5. Has a single standard IP 

4. Why can't I use my own PC as a server
    1. Limited RAM and Memory
    2. Not easily scalable, using AWS we can increase the resouces by easy configuration
    3. limited power backup and internet services
    4. there are many chances where the IP can change, but in cloud will have a single  standard IP

5. Client Server Architecture
    1. Client - referred to as a person / machine accessing the server
    2. Server - app which has all the files, database, html files etc
    3. In order a user to connect with an app server, a socket connection is created, the app(server) will listen and try to serve the request and sends back the response
        a. The data sent using TCP/IP (Transmission Control Protocol / Internet Protocol)


Types of server
1. HTTP Server (Hyper Text Transfer Protocol Server)
    a. This server is used to serve html files, json data etc
    b. Node servers are http servers
    c. Response Format - Status line, headers, blank line, body
    d. Example 
        HTTP/1.1 200 OK
        Content-Type: text/html
        Content-Length: 123

        <html>
        <body>Hello World</body>
        </html>
2. FTP Server (File Transfer Protocol Server)
    a. This server is used to serve files
    b. Response format - 3-digit code + text (single or multi-line)
    c. Example - 
    Single Line Response
        220 Service ready for new user
    Multi line response
        123-First line
        Second line
        123 Last line
        
3. SMTP Server (Simple Mail Transfer Protocol Server)
    a. This erver is used to send mail
    b. Response format  - 3-digit code + optional text
    c. Example
        250 OK
        354 Start mail input; end with <CRLF>.<CRLF>
        550 Requested action not taken: mailbox unavailable


Packets
1. Packets are small chunks of data which are travelled in the socket from client to server and vice versa

Domain Name Servers (DNS)
1. Mapping bw domain name and IP
2. we'll have to purchase "jcube.com" domain and an IP will be assgined to it.
3. Rather than, typing in the IP, we can provide the domain name to connect to the app

Process
1. Let's assume I type in "jcube.com" in the browser,
2. then a request will be sent to the DNS, where the DNS will resolve the request internally and the corresponding IP will be given back
3. Then the request to the server will be made using the IP
4. and then the http server will provide the response to the client and the jcube.com will come up with the browser


Can i create multiple http servers on the same phyiscal server?
1. Yes, we can create http servers in a physical server
2. Let's assume there are multiple request are made to the server, now how the request are mapped to a particular servers? - using PORTS
3. PORTS - we can assign a port to a particular http server, we can access a particular app using the IP + PORT combination (102.209.1.3: 3000)
IP - 102.209.1.3
PORT - 3000
4. System ports - 80 (which we can't use and are reserved to the system)


Paths
1. we can specify a path to be loaded to a IP + port , for example jcube.com/ running on Port 3000 -> can load the front end / UI (let's say react app), 
2. If I want to access the Node app from the same server, I'll have to chaange the port to access the Node server
ex: jcube.com/api we assign the Port number as 3001 for this.

Multiple Server connections in http server
1. If a org has a large server, withing that it can have a http/ftp/smtp servers, pooling all of them might not be a very efficient method.
2. So, according to industry standards, peeps usually have dedicated separate servers to handle DB requests (DB server), or a file server to handle file system related stuffs, or an media server to handle media items for the app
3. Once a client request for some stuff from the http server, the server can either
    a. fetch the items within itself(app/http server) and send the response or
    b. or can request the DB/File/Image server (outside the http server) get the response and serve it to the client

sockets vs Web sockets
1. web socket - web socket is the socket type where once the client creates a connection to the http server, till the user closes the socket, the connection will be active where the client and the http server can share data through that socket.
2. Rather than a traditional scoket, where once the data is passed to client to server and vice versa the connection gets closed.

Getting into code
1. To create a server, we need to require the node http module using "const http = require("node:http");
"
2. createServer function is used to create a server, taking a callback fn with req and res as it's parameters
const server = http.createServer(function(req, res) {
    if(req.url === "/getSecretData") {
        res.end("No secrets for you bro");
    }
    res.end("Hello World");
});
3. res.end("content"); -> end is used to end the http request
4. req.url === "/getSecretData"
    using this kind of conditions, we can render specific data based on the path which is configured here
    ex:
        in the browser, if we type in localhost:3000, the response from the server will be  "Hello World"
        but if we give in, localhose:3000/getSecretData, the server will respond with "No secrets for you bro"
5. We'll be chucking out native node server creaation and use Express (wrapper for creating http servers using Node) as it's more efficient