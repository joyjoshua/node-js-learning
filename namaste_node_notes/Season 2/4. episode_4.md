Namaste Node 
Episode 4 - Routing and Request Handlers

Routing 
1. Code Snippet

app.use("/", (req, res)=> {
    res.send("Welcome to Dev Tinder");
});

app.use("/hello", (req, res)=> {
    res.send("Hello bro");
});

app.use("/test", (req, res)=> {
    res.send("Test bro");
});

* in the above snippets, "/", "hello", "test" are the routes, once called the subsequent Request Handlers (callbacks) are executed
* if / route is called, "Welcome to Dev Tinder" will be shown, '/hello' is called, "Hello bro" will be shown and '/test' is called "Test bro" will be shown
* But node will maintain a wildcard pattern where if the route are matching first, the corresponding request handlers will be executed
    for example. in the above snippet, all routes will show "Welcome to Dev Tinder" because as node executes the first route. It remembers the route and if it goes to the next app.use, as '/' is present in '/hello', node will execute the '/' callback fn, and it goes the same to '/test' as '/' matches first in '/hello' and '/test'
* Let's move the '/' route to the bottom, and run, corresponding callback will be called, why because the first app.use route '/hello' wildcard won't match with '/test' amd '/' so the output will be as expected
* Let's assume there's another route '/hello/2' below the '/hello' route

    app.use("/hello", (req, res)=> {
        res.send("Hello bro");
    });
    app.use("/hello/2", (req, res)=> {
        res.send("Hello again bro");
    });

    app.use("/test", (req, res)=> {
        res.send("Test bro");
    });

    app.use("/", (req, res)=> {
        res.send("Welcome to Dev Tinder");
    });

    The output will be if we call all the routes mentioned above

    Hello bro
    Hello bro
    Test bro
    Welcome to Dev Tinder

    /hello/2 will not get executed as it has '/hello' in the route which was executed before it, so node will go to the '/hello' route and it's callback fn will be executed

2. Whenever we access any website from the browser, the browser will always make a GET method to the API to fetch the results and display in the browser

Advanced Routing Options

* the use of '?' in the route
    *  app.use("/ab?c", (req, res)=> {
         res.send("Hello bro");
        });
    * '?' is an optional keyword, where we it's optional to provide 'b' in the route '/abc'
    * routes '/abc', '/ac' will render the result
    * but route '/ab' '/a' will return an error as c is not an optional key in the route
* the use of '+' in the route
    *  app.use("/ab+c", (req, res)=> {
         res.send("Hello bro");
        });
    * we can provide routes like '/abbbbbc' the count number of b should be greaater than 1, in all those scenarios 'Hello bro' will be returned
    * but route '/a' '/ac' will return an error as a,b,c are all required key in the route
* the use of '*' in the route
    *  app.use("/ab*c", (req, res)=> {
         res.send("Hello bro");
        });
    * routes like '/abodngknskjgsfngjksfc' will return 'Hello bro' as the route accepts any character within 'a' and 'c' in the route

* other regex patterns with examples
//the use of *
app.get('/ab*c', (req, res)=> {
    //Fetching User list from DB
    res.send('Result generated for *');
});

//the use of ()
app.get(/a(bc)d/, (req, res)=> {
    //Fetching User list from DB
    res.send('Result generated for (bc)');
});

//the use of fetching from routes ending with fly
app.get(/.*fly$/, (req, res)=> {
    //Fetching User list from DB
    res.send('Result generated for routes ending with fly');
});

* query params in routing
    * We can fetch the query param values from the routes
    app.get("/userInfo", (req, res)=> {
        //Fetching values from query params
        const name = req.query.name;
        const age = req.query.age
        res.send({firstName: name, age: age});
    });
    route - localhost:3000/userInfo/?name=joy&age=24
    op - {
        "firstName": "joy",
        "age": "24"
    }   

* dynamic routes
    * app.get("/user/:userId/:userName/:pwd", (req, res)=> {
        res.send(req.params);
    });
    * route - localhost:3000/user/101/joy/testing
    * op - {
                "userId": "101",
                "userName": "joy",
                "pwd": "testing"
            }